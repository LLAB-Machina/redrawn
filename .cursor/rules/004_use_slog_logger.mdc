---
description: Use log/slog for all backend logging; configure via LOG_LEVEL and LOG_FORMAT; avoid std log in new code
globs: api/**/*.go
alwaysApply: true
---

**Use log/slog for backend logging**

- **Default logger**: initialize a global default in `api/cmd/api/main.go` using `slog.SetDefault`.
- **Formatting**: prefer JSON in production and text in development, controlled by env `LOG_FORMAT` (`json` or `text`).
- **Levels**: control with `LOG_LEVEL` (`debug`, `info`, `warn`, `error`). Default `debug` in dev, `info` in prod.
- **Context**: attach attributes (e.g., `component`, request ids) using `slog.With(...)` in workers/middleware.
- **Do not** add new uses of `log.Printf`/`log.Fatal` in backend code. Use `slog` and exit with `os.Exit(1)` where necessary.

Example

```go
logger := slog.With(slog.String("component", "dbworker"))
logger.Info("processing", slog.Int("worker", idx))
```

